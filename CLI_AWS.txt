933553543904

AWSCLI Access keys

7/2/2020
aws configure
username: cliuser
Access Key ID:AKIAYCNEJ4IN5HNZGE45
Secret Access Key: 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
region: us-west-2

Find the no of instances in the account
aws ec2 describe-instances

Find the no of instances in the account as per the values
aws ec2 describe-instances --filters Name=instance-state-name,Values=stopped,running


Terminate Instances in AWS
aws ec2 terminate-instances --instance-ids <i-0dcf304c12d220542>


#!/bin/bash
yum update -y
yum install httpd -y
service httpd start
chkconfig httpd on
IP_ADDR=$(curl http://169.254.169.254/latest/meta-data/public-ipv4)
echo "Manual Instance with IP $IP_ADDR" > /var/www/html/index.html
echo "ok" > /var/www/html/health.html

Transitive peering is not supported in AWS
Default VPC is automatically created by AWS
Internet Gateway

ec2-user@54.187.173.239

“ec2-user” (Amazon Linux, Red Hat Linux, SUSE Linux)
“root” (Red Hat Linux, SUSE Linux)
“ubuntu” (Ubuntu Linux distribution)
“fedora” (Fedora Linux distribution)

mysql pwd: Project1
mjasti - Project1
mjasti2 - Project1
DB name: testmattermost

Connect from public instance to private instance - 
copy the pem file into public ec2 instance and run the below command.
ssh -i vpckeypair ec2-user@10.60.2.74  <IP of private EC2 machine)

wget https://releases.mattermost.com/5.24.2/mattermost-5.24.2-linux-amd64.tar.gz
wget https://releases.mattermost.com/5.23.1/mattermost-5.23.1-linux-amd64.tar.gz

IGWY - Per VPC
NATGTWY - Per subnet in prod scenario
VPC Gateway endpoint - No entity in VPC (Just entry in route table)
Can be used for  - S3 and Dynamo DB ONLY
Interface End point - An ENI (Elastic Network Interface) is created.

draw.io
lucidchart.com 

sudo ssh -i vpckeypair ubuntu@10.40.2.196
ubuntu@34.215.191.231

10.40.1.38:8065

pwd: maheshjasti

sudo ssh -i vpckeypair ubuntu@10.40.2.196

create user 'mjasti'@'10.30.1.34' identified by 'maheshjast';
create user 'mjasti'@'%' identified by 'maheshjast';
create user 'mmuser'@'%' identified by 'maheshjast';
grant all privileges on mattermost.* to 'mjasti'@'%';
grant all privileges on mattermost.* to 'mjasti'@'10.30.1.34';
GRANT ALTER, CREATE, DELETE, DROP, INDEX, INSERT, SELECT, UPDATE ON mattermost.* TO 'mjasti'@'%';
GRANT ALTER, CREATE, DELETE, DROP, INDEX, INSERT, SELECT, UPDATE ON mattermost.* TO 'mmuser'@'%';

Bind the service to 0.0.0.0/3000 and not 127.0.0.1/3000.(This will leave your service open and accessible by anybody on the internet, that is were step 2 comes into picture).
In AWS security group now allow port 3000 for 0.0.0.0 if you want it be access by anybody over the internet or add VPN or your network IP to allow it only for you and you team.



https://docs.aws.amazon.com/ses/latest/DeveloperGuide/send-email-set-up.html
https://docs.aws.amazon.com/ses/latest/DeveloperGuide/quick-start.html

\GL\03 Managed Services\Support Files\aws-rekognition



1. After creating VPC, we need to create the IGWY and setup route table
2. If we need public IP, we need to select the auto assign IP address
3. Set up SNS topic with HTTP endpoint
4. A custom TCP security rule should be added for 8080 port (web server)
5. While creating table in Athena, we should store the query in some s3 location otherwise
we get the error as "No output location provided. An output location is required either 
through the Workgroup result configuration setting or as an API input. 
(Service: AmazonAthena; Status Code: 400; Error Code: InvalidRequestException)"
6. Remember to use 8080 while check in browser http://<public-ip>:8080/sns
7. While creating subscription, we have to give http://<public-ip>:8080/sns


Create the IAM role for EC2 Instance (S3 and DynamoDB)
Create the VPC and Subnet and initiate an EC2 instance
Login to the instance and setup the softwares and program as per the given instructions
Setup S3 and SNS event trigger
Verify DynamoDB after input file is loaded into S3
Setup the Athena by using S3 target CSV file





Balaji Traders: 88550
OM Balaji Traders: 90695
Sri Sai Balaji Traders: 40755
Sri sai Balaji Traders: 79999
OM Balaji Traders: 39999

Total: 339998
